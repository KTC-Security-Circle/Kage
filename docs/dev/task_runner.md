# Kage ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆ ã‚¿ã‚¹ã‚¯ãƒ©ãƒ³ãƒŠãƒ¼ã‚¬ã‚¤ãƒ‰

ã“ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã§ã¯ [poethepoet](https://poethepoet.natn.io/) ã‚’ä½¿ç”¨ã—ã¦ã‚¿ã‚¹ã‚¯ãƒ©ãƒ³ãƒŠãƒ¼ã‚’å®Ÿè£…ã—ã¦ã„ã¾ã™ã€‚ã‚³ãƒãƒ³ãƒ‰æ•°ã‚’å¤§å¹…ã«å‰Šæ¸›ã—ã€ã‚ˆã‚Šä½¿ã„ã‚„ã™ãæ•´ç†ã•ã‚Œã¾ã—ãŸã€‚

> âš ï¸ **é‡è¦**: v0.2.0ã§ã‚³ãƒãƒ³ãƒ‰æ§‹æˆã‚’å¤§å¹…ã«è¦‹ç›´ã—ã¾ã—ãŸã€‚å¾“æ¥ã®ã‚³ãƒãƒ³ãƒ‰ã‹ã‚‰å¤‰æ›´ãŒã‚ã‚Šã¾ã™ã€‚

## ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ãƒ»ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—

### poethepoet ã®ã‚°ãƒ­ãƒ¼ãƒãƒ«ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ï¼ˆæ¨å¥¨ï¼‰

```bash
# poethepoetã‚’ã‚°ãƒ­ãƒ¼ãƒãƒ«ã«ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
uv tool install poethepoet

# åˆå›ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—
poe setup
```

### ãƒ­ãƒ¼ã‚«ãƒ«ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã§ã®ä½¿ç”¨

```bash
# uv runçµŒç”±ã§å®Ÿè¡Œ
uv run poe setup
```

## åŸºæœ¬çš„ãªä½¿ç”¨æ–¹æ³•

```bash
# åˆ©ç”¨å¯èƒ½ãªã‚¿ã‚¹ã‚¯ã®ä¸€è¦§è¡¨ç¤º
poe -h

# ç‰¹å®šã®ã‚¿ã‚¹ã‚¯ã®ãƒ˜ãƒ«ãƒ—
poe -h <command>

# ã‚¿ã‚¹ã‚¯ã®å®Ÿè¡Œ
poe <command>
```

## ğŸ“‹ åˆ©ç”¨å¯èƒ½ãªã‚¿ã‚¹ã‚¯ä¸€è¦§ï¼ˆ17å€‹ï¼‰

### ğŸš€ å¿…é ˆã‚³ãƒãƒ³ãƒ‰

#### ç’°å¢ƒã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—

| ã‚³ãƒãƒ³ãƒ‰ | èª¬æ˜ | ã‚³ãƒãƒ³ãƒ‰ä¾‹ |
|---------|------|----------|
| `setup` | åˆå›ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ— | `poe setup` |
| `sync` | ä¾å­˜é–¢ä¿‚ã®åŒæœŸ | `poe sync` |

#### ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³å®Ÿè¡Œ

| ã‚³ãƒãƒ³ãƒ‰ | èª¬æ˜ | ã‚³ãƒãƒ³ãƒ‰ä¾‹ |
|---------|------|----------|
| `run` | ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³å®Ÿè¡Œ | `poe run` |
| `dev` | é–‹ç™ºãƒ¢ãƒ¼ãƒ‰ï¼ˆãƒ›ãƒƒãƒˆãƒªãƒ­ãƒ¼ãƒ‰ä»˜ãï¼‰ | `poe dev` |
| `web` | Webç‰ˆã¨ã—ã¦å®Ÿè¡Œ | `poe web` |
| `cli` | CLIãƒ„ãƒ¼ãƒ«å®Ÿè¡Œ | `poe cli --help` |

#### ã‚³ãƒ¼ãƒ‰å“è³ªç®¡ç†

| ã‚³ãƒãƒ³ãƒ‰ | èª¬æ˜ | å®Ÿè¡Œå†…å®¹ |
|---------|------|---------|
| `check` | å…¨å“è³ªãƒã‚§ãƒƒã‚¯ | lint + format-check + type-check |
| `fix` | ã‚³ãƒ¼ãƒ‰è‡ªå‹•ä¿®æ­£ | lint-fix + format |

#### ãƒ†ã‚¹ãƒˆå®Ÿè¡Œ

| ã‚³ãƒãƒ³ãƒ‰ | èª¬æ˜ | ã‚³ãƒãƒ³ãƒ‰ä¾‹ |
|---------|------|----------|
| `test` | å…¨ãƒ†ã‚¹ãƒˆå®Ÿè¡Œ | `poe test` |
| `test-cov` | ã‚«ãƒãƒ¬ãƒƒã‚¸ä»˜ããƒ†ã‚¹ãƒˆ | `poe test-cov` |

### ğŸ“š ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆãƒ»ãƒ“ãƒ«ãƒ‰

| ã‚³ãƒãƒ³ãƒ‰ | èª¬æ˜ | ã‚³ãƒãƒ³ãƒ‰ä¾‹ |
|---------|------|----------|
| `docs` | ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‚µãƒ¼ãƒãƒ¼èµ·å‹• | `poe docs` |
| `docs-build` | ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆãƒ“ãƒ«ãƒ‰ | `poe docs-build` |
| `docs-deploy` | GitHub Pagesã«ãƒ‡ãƒ—ãƒ­ã‚¤ | `poe docs-deploy` |
| `build` | Webç‰ˆãƒ“ãƒ«ãƒ‰ | `poe build` |

### âš™ï¸ ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ãƒ»ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£

| ã‚³ãƒãƒ³ãƒ‰ | èª¬æ˜ | ã‚³ãƒãƒ³ãƒ‰ä¾‹ |
|---------|------|----------|
| `migrate` | ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ | `poe migrate` |
| `db-status` | ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³çŠ¶æ…‹ç¢ºèª | `poe db-status` |
| `clean` | ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã‚¯ãƒªã‚¢ | `poe clean` |

## ğŸ’¡ é–‹ç™ºãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ã®ä¾‹

### åˆå›ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—
```bash
# ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚¯ãƒ­ãƒ¼ãƒ³å¾Œ
poe setup
```

### æ—¥å¸¸ã®é–‹ç™ºä½œæ¥­
```bash
# é–‹ç™ºãƒ¢ãƒ¼ãƒ‰ã§èµ·å‹•
poe dev

# ã‚³ãƒ¼ãƒ‰å“è³ªãƒã‚§ãƒƒã‚¯
poe check

# è‡ªå‹•ä¿®æ­£
poe fix

# ãƒ†ã‚¹ãƒˆå®Ÿè¡Œ
poe test
```

### PRæå‡ºå‰
```bash
# å…¨ãƒã‚§ãƒƒã‚¯å®Ÿè¡Œ
poe check && poe test

# ã‚«ãƒãƒ¬ãƒƒã‚¸ç¢ºèª
poe test-cov
```

### ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆä½œæ¥­
```bash
# ãƒ­ãƒ¼ã‚«ãƒ«ç¢ºèª
poe docs

# ãƒ“ãƒ«ãƒ‰ãƒ†ã‚¹ãƒˆ
poe docs-build
```

## ğŸ”„ ã‚³ãƒãƒ³ãƒ‰å¤‰æ›´ç‚¹

### å‰Šé™¤ã•ã‚ŒãŸã‚³ãƒãƒ³ãƒ‰ã¨ä»£æ›¿æ–¹æ³•

| æ—§ã‚³ãƒãƒ³ãƒ‰ | æ–°ã‚³ãƒãƒ³ãƒ‰ / ä»£æ›¿æ–¹æ³• |
|----------|---------------------|
| `app-run` | `poe run` |
| `app-dev` | `poe dev` |
| `app-web` | `poe web` |
| `app-web-dev` | `flet run --web -dr` |
| `app-debug` | `flet run -v` |
| `lint` | `poe check` |
| `lint-fix` | `poe fix` |
| `format` | `poe fix` |
| `format-check` | `poe check` |
| `type-check` | `poe check` |
| `docs-serve` | `poe docs` |
| `db-upgrade` | `poe migrate` |
| `db-current` | `poe db-status` |
| `build-web` | `poe build` |

### å‰Šé™¤ã•ã‚ŒãŸã‚³ãƒãƒ³ãƒ‰ï¼ˆç›´æ¥å®Ÿè¡Œæ¨å¥¨ï¼‰

| å‰Šé™¤ã•ã‚ŒãŸã‚³ãƒãƒ³ãƒ‰ | ä»£æ›¿æ–¹æ³• |
|------------------|---------|
| `test-unit` | `uv run pytest -m unit` |
| `test-integration` | `uv run pytest -m integration` |
| `deps-list` | `uv pip list` |
| `deps-outdated` | `uv pip list --outdated` |
| `db-downgrade` | `uv run alembic -c src/models/migrations/alembic.ini downgrade -1` |
| `db-history` | `uv run alembic -c src/models/migrations/alembic.ini history` |
| PowerShellå›ºæœ‰ã‚³ãƒãƒ³ãƒ‰ | OSå›ºæœ‰ã®ã‚³ãƒãƒ³ãƒ‰ã‚’ç›´æ¥ä½¿ç”¨ |

## â“ ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°

### ã‚ˆãã‚ã‚‹å•é¡Œ

1. **ã‚³ãƒãƒ³ãƒ‰ãŒè¦‹ã¤ã‹ã‚‰ãªã„**
   ```bash
   # poethepoetãƒãƒ¼ã‚¸ãƒ§ãƒ³ç¢ºèª
   poe --version
   
   # åˆ©ç”¨å¯èƒ½ãªã‚¿ã‚¹ã‚¯ç¢ºèª
   poe -h
   ```

2. **ä¾å­˜é–¢ä¿‚ã‚¨ãƒ©ãƒ¼**
   ```bash
   # å†åŒæœŸ
   poe sync
   
   # ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã‚¯ãƒªã‚¢
   poe clean
   ```

3. **æ—§ã‚³ãƒãƒ³ãƒ‰ãŒä½¿ãˆãªã„**
   - ä¸Šè¨˜ã®ã€Œã‚³ãƒãƒ³ãƒ‰å¤‰æ›´ç‚¹ã€ã‚’å‚ç…§
   - å¤šãã®ã‚³ãƒãƒ³ãƒ‰ã¯ `check` ã¾ãŸã¯ `fix` ã«çµ±åˆã•ã‚Œã¾ã—ãŸ

4. **å€‹åˆ¥ãƒ†ã‚¹ãƒˆå®Ÿè¡Œ**
   ```bash
   # å˜ä½“ãƒ†ã‚¹ãƒˆã®ã¿
   uv run pytest -m unit
   
   # ç‰¹å®šãƒ•ã‚¡ã‚¤ãƒ«
   uv run pytest tests/specific_test.py -v
   ```

## âš™ï¸ ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚º

æ–°ã—ã„ã‚¿ã‚¹ã‚¯ã‚’è¿½åŠ ã™ã‚‹å ´åˆã¯ã€`pyproject.toml`ã®`[tool.poe.tasks]`ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã«è¿½åŠ ï¼š

```toml
[tool.poe.tasks]
# æ—¢å­˜ã®ã‚‚ã®...

# ã‚«ã‚¹ã‚¿ãƒ ã‚¿ã‚¹ã‚¯ã®ä¾‹
my-task = "echo 'Custom task'"
complex-task = ["sync", "check", "test"]
```

## ğŸ“– å‚è€ƒè³‡æ–™

- [poethepoet å…¬å¼ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ](https://poethepoet.natn.io/)
- [ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£](architecture-design.md)
- [ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ã‚¬ã‚¤ãƒ‰](setup.md)
