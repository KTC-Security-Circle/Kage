# 05. プロジェクト画面デザイン修正

## 現状の問題点

src/views_new/projects/view.py のデザインが、テンプレートの ProjectsScreen.tsx と以下の点で乖離している：

### 1. ヘッダーレイアウト

**テンプレート**：
- 固定ヘッダーエリア（タイトル「プロジェクト」、説明「複数のタスクをまとめたプロジェクト (X件)」）
- 右上に検索バー（w-64）と新規作成ボタン
- 明確な背景色（bg-white）とボーダー（border-b）

**現状**：
- 基本的なレイアウト
- プロジェクト総数表示が不足
- 検索機能の統合が不十分

### 2. ステータス別セクション表示

**テンプレート**：
- 進行中、完了、保留中、キャンセルの4つのセクション
- 各セクションにアイコンとバッジカウント
- セクションの条件付き表示（件数0の場合は非表示）
- 縦並びのセクション配置

**現状**：
- セクション分けが未実装またはスタイリングが不足
- ステータス別の視覚的区分が不明確

### 3. 2ペインレイアウト

**テンプレート**：
- 左側：プロジェクト一覧（lg:col-span-2、2/5の幅）
- 右側：詳細パネル（lg:col-span-3、3/5の幅）
- 一覧側の垂直スクロール対応

**現状**：
- レイアウト構造が未実装または異なる
- スクロール制御が不適切

### 4. プロジェクトカードデザイン

**テンプレート**：
- 統一されたカードデザイン
- 選択状態の明確な視覚化（border-blue-500、shadow-md）
- 作成日表示（toLocaleDateString('ja-JP')）
- プログレスバーによるタスク進捗表示
- 完了プロジェクトには CheckCircle アイコン
- 説明文の2行クランプ表示

**現状**：
- 基本的なプロジェクト表示
- 進捗表示機能が未実装
- 視覚的フィードバックが不十分

### 5. 詳細パネル

**テンプレート**：
- プロジェクト未選択時の空状態表示
- 選択時の詳細情報表示
- ステータス変更機能
- 関連タスク一覧
- プロジェクト編集・削除ボタン
- 期日とメタデータ表示

**現状**：
- 詳細パネルが未実装または基本的

### 6. プログレス機能

**テンプレート**：
- プロジェクト進捗の計算（完了タスク / 総タスク）
- Progress コンポーネントによる視覚的表示
- 「X / Y タスク」形式の数値表示

**現状**：
- プログレス計算・表示機能が未実装

## 修正箇所

### 1. ヘッダー部分の再構築

```python
# 修正内容：
- 固定ヘッダーエリアの実装
- 「複数のタスクをまとめたプロジェクト」説明の追加
- 右端に検索バー（w-64相当）と新規ボタン配置
- プロジェクト総数カウントの表示
```

### 2. ステータス別セクション表示の実装

```python
# 修正内容：
- 進行中（active）セクション（FolderOpen アイコン）
- 完了（completed）セクション（CheckCircle アイコン）
- 保留中（on_hold）セクション（Clock アイコン）
- キャンセル（cancelled）セクション（XCircle アイコン）
- 各セクションの条件付き表示
- バッジカウント表示
```

### 3. 2ペインレイアウトの実装

```python
# 修正内容：
- 左側：lg:col-span-2のプロジェクト一覧
- 右側：lg:col-span-3の詳細パネル
- 一覧側の overflow-y-auto 設定
- 適切なグリッドレイアウト
```

### 4. プロジェクトカードの強化

```python
# 修正内容：
- 統一されたカードレイアウト
- ホバー効果（hover:border-neutral-300）
- 選択状態の視覚化（border-blue-500、shadow-md）
- 作成日表示（日本語フォーマット）
- プログレスバーコンポーネントの実装
- 完了アイコンの条件表示
- 説明文の2行クランプ（line-clamp-2相当）
```

### 5. プログレス計算機能の実装

```python
# 修正内容：
- getProjectTasks() 関数の実装
- getProjectProgress() 関数の実装
- 完了タスク数 / 総タスク数の計算
- Progress コンポーネントの作成（Fletで実装）
- 進捗パーセンテージと数値表示
```

### 6. 詳細パネルの実装

```python
# 修正内容：
- 空状態の中央配置表示
- 選択時のプロジェクト詳細表示
- ステータス変更Selectコンポーネント
- 関連タスク一覧の表示
- 編集・削除アクションボタン
- 期日とメタデータ表示
- タスクへの直接遷移機能
```

### 7. 検索・フィルター機能

```python
# 修正内容：
- 検索アイコン付き入力フィールド
- タイトル・説明での横断検索
- リアルタイム検索結果反映
- ステータス別フィルタリング
```

### 8. タスク連携機能

```python
# 修正内容：
- プロジェクト・タスク関連データの取得
- タスク画面への遷移機能
- プロジェクト進捗の動的更新
```

## 優先度
**中高** - プロジェクト管理の重要機能

## 影響範囲
- プロジェクト画面全体
- プロジェクト関連コンポーネント
- タスクとの連携機能

## 作業見積もり
約4-5時間（プログレス機能と詳細パネル実装含む）

## 依存関係
- 共通レイアウト修正完了後
- タスクとの連携データ構造の確定
- Progress コンポーネントの作成
- サンプルデータの拡充（プロジェクト・タスク関連データ）