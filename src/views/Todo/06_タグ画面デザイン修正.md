# 06. タグ画面デザイン修正

## 現状の問題点

src/views_new/tags/view.py のデザインが、テンプレートの TagsScreen.tsx と以下の点で乖離している：

### 1. ヘッダーレイアウト

**テンプレート**：
- 固定ヘッダーエリア（タイトル「タグ」、説明「メモ、タスク、プロジェクトを整理するタグ (X件)」）
- 右上に新規作成ボタン
- 明確な背景色（bg-white）とボーダー（border-b）

**現状**：
- 基本的なレイアウト
- タグ総数表示が不足
- 説明文の詳細度が不足

### 2. 3ペインレイアウト

**テンプレート**：
- 左側：タグ一覧（1/3の幅）
- 右側：詳細パネル（lg:col-span-2、2/3の幅）
- タグ一覧の垂直スクロール対応

**現状**：
- レイアウト構造が未実装または異なる
- 3カラムレイアウトの実装が不足

### 3. タグカードデザイン

**テンプレート**：
- 統一されたカードデザイン
- カラーサークル表示（w-4 h-4 rounded-full）
- 関連アイテム数のバッジ表示
- アイテム種別の内訳表示（メモ、タスク、プロジェクト各件数）
- 小さなアイコン（FileText、CheckSquare、FolderOpen）付き
- 選択状態の明確な視覚化

**現状**：
- 基本的なタグ表示
- カラー表示機能が不足
- 関連アイテムカウントが未実装

### 4. 詳細パネル

**テンプレート**：
- タグ未選択時の適切な初期表示
- 選択時のタグ詳細表示
- カラーサークルとアイコン
- 総アイテム数表示
- 編集ボタン（EditTagDialog連携）
- タグ付きアイテムのセクション別表示

**現状**：
- 詳細パネルが未実装または基本的

### 5. タグ付きアイテム表示

**テンプレート**：
- タグ付きメモ、タスク、プロジェクトの分離表示
- 各セクションの条件付き表示
- アイテムクリック時の該当画面への遷移
- 各アイテムの適切な情報表示

**現状**：
- 関連アイテム表示機能が未実装

### 6. カラーパレット機能

**テンプレート**：
- タグカラーの視覚的表示
- カラーによるタグの識別
- カラーピッカー機能（編集時）

**現状**：
- カラー管理機能が未実装または不足

## 修正箇所

### 1. ヘッダー部分の再構築

```python
# 修正内容：
- 固定ヘッダーエリアの実装
- 「メモ、タスク、プロジェクトを整理するタグ」説明の追加
- 右端に新規作成ボタン配置
- タグ総数カウントの表示
```

### 2. 3ペインレイアウトの実装

```python
# 修正内容：
- 左側：grid-cols-1のタグ一覧
- 右側：lg:col-span-2の詳細パネル
- タグ一覧の overflow-y-auto 設定
- 適切なグリッドレイアウト（lg:grid-cols-3）
```

### 3. タグカードの強化

```python
# 修正内容：
- 統一されたカードレイアウト
- カラーサークル（w-4 h-4 rounded-full、backgroundColor: tag.color）
- ホバー効果（hover:border-neutral-300）
- 選択状態の視覚化（border-blue-500、shadow-md）
- 総アイテム数バッジ表示
- アイテム種別内訳（FileText、CheckSquare、FolderOpenアイコン付き）
```

### 4. 関連アイテム集計機能の実装

```python
# 修正内容：
- getTaggedItems() 関数の実装
- メモ・タスク・プロジェクトの横断集計
- リアルタイムカウント更新
- アイテム種別ごとの件数表示
```

### 5. 詳細パネルの実装

```python
# 修正内容：
- タグ選択時のヘッダー表示
- カラーサークルとアイコンの大きめ表示（w-8 h-8）
- 総アイテム数の説明文表示
- 編集ボタンの適切な配置
- EditTagDialog との連携
```

### 6. タグ付きアイテムセクションの実装

```python
# 修正内容：
- タグ付きメモセクション（条件付き表示）
- タグ付きタスクセクション（条件付き表示）
- タグ付きプロジェクトセクション（条件付き表示）
- 各アイテムのクリック時ナビゲーション
- 適切なアイテム情報表示
```

### 7. カラー管理機能の強化

```python
# 修正内容：
- タグカラーのHEX値管理
- カラーサークルの動的レンダリング
- カラーピッカーコンポーネントの作成
- カラー変更時のリアルタイム反映
```

### 8. 空状態の実装

```python
# 修正内容：
- タグが0件の場合の表示
- 適切な空状態メッセージ
- 新規作成への誘導
```

## 優先度
**中** - 組織化機能として重要だが、コア機能ではない

## 影響範囲
- タグ画面全体
- タグ関連コンポーネント
- メモ・タスク・プロジェクトとの連携

## 作業見積もり
約3-4時間（関連アイテム集計と詳細パネル実装含む）

## 依存関係
- 共通レイアウト修正完了後
- カラーパレットコンポーネントの作成
- メモ・タスク・プロジェクトとの連携データ構造の確定
- EditTagDialog コンポーネントの実装