# 04. タスク画面デザイン修正

## 現状の問題点

src/views_new/tasks/view.py のデザインが、テンプレートの TasksScreen.tsx と以下の点で乖離している：

### 1. ヘッダーレイアウト

**テンプレート**：
- 固定ヘッダーエリア（タイトル「タスク」、説明「GTDベースのタスク管理 (X件)」）
- 右上に検索バー（w-64）と新規作成ボタン
- 明確な背景色（bg-white）とボーダー（border-b）

**現状**：
- 基本的なレイアウト
- GTDベースの説明文が不足
- 検索機能の視覚的統合が不十分

### 2. タブシステム

**テンプレート**：
- 7つのタブ（TODO、今日、進行中、待機中、完了、キャンセル、期限超過）
- 各タブにアイコンとバッジカウント
- grid-cols-7 による均等配置
- 期限超過タブは警告色（amber）で強調

**現状**：
- カスタムタブコンポーネント使用
- タブ数や配置がテンプレートと異なる
- 期限超過の視覚的警告が不足

### 3. 2ペインレイアウト

**テンプレート**：
- 左側：タスクリスト（lg:col-span-2、2/5の幅）
- 右側：詳細パネル（lg:col-span-3、3/5の幅）
- 各タブごとに独立したCardコンテナ
- カードヘッダーにアイコンと説明

**現状**：
- レイアウト構造が未実装または異なる
- カード形式の表示が不足

### 4. タスクカードデザイン

**テンプレート**：
- 統一されたカードデザイン（p-4、border、rounded-lg）
- 選択状態の明確な視覚化（border-blue-500、bg-blue-50）
- プロジェクトバッジ（クリック可能）
- タグバッジ（カラー付き）
- メモ起源表示（「メモから生成」リンク）
- 繰り返しタスクバッジ

**現状**：
- 基本的なタスク表示
- 視覚的フィードバックが不十分
- 関連データ（プロジェクト、メモ）表示が未実装

### 5. 詳細パネル

**テンプレート**：
- タスク未選択時の空状態表示
- 選択時の詳細情報表示
- ステータス変更ドロップダウン
- 編集・削除ボタン
- 関連プロジェクト・メモへのリンク

**現状**：
- 詳細パネルが未実装または基本的

## 修正箇所

### 1. ヘッダー部分の再構築

```python
# 修正内容：
- 固定ヘッダーエリアの実装
- タイトルと「GTDベースのタスク管理」説明の追加
- 右端に検索バー（w-64相当）と新規ボタン配置
- タスク総数カウントの表示
```

### 2. 7タブシステムの実装

```python
# 修正内容：
- TODO、今日、進行中、待機中、完了、キャンセル、期限超過の7タブ
- 各タブにアイコン（ListTodo、CalendarClock等）
- リアルタイムバッジカウント
- 期限超過タブの警告色表示
- grid-cols-7レイアウト
```

### 3. 2ペインレイアウトの実装

```python
# 修正内容：
- 左側：lg:col-span-2のタスクリスト
- 右側：lg:col-span-3の詳細パネル
- 各タブコンテンツを独立したCardで表示
- カードヘッダーにアイコンと説明文
```

### 4. タスクカードの強化

```python
# 修正内容：
- 統一されたカードレイアウト（p-4、border、rounded-lg）
- ホバー効果（hover:border-neutral-300）
- 選択状態の視覚化（border-blue-500、bg-blue-50）
- プロジェクトバッジ（クリック可能、navigateTo連携）
- タグバッジ（カラー表示）
- メモ起源表示（ExternalLinkアイコン付き）
- 繰り返しタスクバッジの条件表示
```

### 5. 詳細パネルの実装

```python
# 修正内容：
- 空状態の中央配置表示
- 選択時のタスク詳細表示
- ステータス変更Selectコンポーネント
- 編集・削除アクションボタン
- プロジェクト・メモへのナビゲーション
- 期日表示とメタデータ
```

### 6. ステータス管理の強化

```python
# 修正内容：
- タスクステータスの完全な列挙型対応
- ステータス変更時のリアルタイム更新
- 期限超過の自動判定と表示
```

### 7. 検索・フィルター機能

```python
# 修正内容：
- 検索アイコン付き入力フィールド
- タイトル・説明・タグでの横断検索
- リアルタイム検索結果反映
```

## 優先度
**高** - タスク管理の中核機能

## 影響範囲
- タスク画面全体
- タスク関連コンポーネント
- プロジェクト・メモとの連携

## 作業見積もり
約5-6時間（7タブシステムと詳細パネル実装含む）

## 依存関係
- 共通レイアウト修正完了後
- プロジェクト・メモとの画面間遷移実装
- サンプルデータの拡充（期限、プロジェクト関連等）